!function(t){function e(e){for(var n,r,i=e[0],s=e[1],a=0,u=[];a<i.length;a++)r=i[a],o[r]&&u.push(o[r][0]),o[r]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);for(c&&c(e);u.length;)u.shift()()}var n={},o={0:0};function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.e=function(t){var e=[],n=o[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise(function(e,r){n=o[t]=[e,r]});e.push(n[2]=i);var s,a=document.getElementsByTagName("head")[0],c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=function(t){return r.p+""+t+".index.js"}(t),s=function(e){c.onerror=c.onload=null,clearTimeout(u);var n=o[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src,s=new Error("Loading chunk "+t+" failed.\n("+r+": "+i+")");s.type=r,s.request=i,n[1](s)}o[t]=void 0}};var u=setTimeout(function(){s({type:"timeout",target:c})},12e4);c.onerror=c.onload=s,a.appendChild(c)}return Promise.all(e)},r.m=t,r.c=n,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r.oe=function(t){throw console.error(t),t};var i=window.webpackJsonp=window.webpackJsonp||[],s=i.push.bind(i);i.push=e,i=i.slice();for(var a=0;a<i.length;a++)e(i[a]);var c=s;r(r.s=36)}([function(t,e,n){"use strict";function o(t,e){this.x=t,this.y=e}function r(t,e,n,o){this.height=o,this.width=n,this.x=t,this.y=e}n.d(e,"a",function(){return o}),n.d(e,"b",function(){return r})},function(t,e,n){"use strict";function o(t){return function(e){return Math.pow(e,t)}}function r(t){return function(e){return e<=1?o(t)(e):1-s(t)(1-e)}}function i(t){return function(e){return e>1&&(e=1),1-o(t)(1-e)}}function s(t){return function(e){return e*t}}function a(t){return o(3)(t)}function c(t){return r(3)(t)}function u(t){return o(4)(t)}function h(t){return r(4)(t)}function f(t){return i(3)(t)}function l(t){return i(4)(t)}function m(t){return function(e){return e>1&&(e=1),t(1-e)}}n.d(e,"e",function(){return i}),n.d(e,"h",function(){return s}),n.d(e,"a",function(){return a}),n.d(e,"b",function(){return c}),n.d(e,"c",function(){return u}),n.d(e,"d",function(){return h}),n.d(e,"f",function(){return f}),n.d(e,"g",function(){return l}),n.d(e,"i",function(){return m})},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var o=n(0),r={collidePointPoint:function(t,e){if(t.x!==e.x||t.y!==e.y)return!1;return!0},collidePointRectangle:function(t,e){if(t.x<e.x||t.x>e.x+e.width||t.y<e.y||t.y>e.y+e.height)return!1;return!0},collideRectangleRectangle:function(t,e){if(t.x+t.width<=e.x||t.x>=e.x+e.width||t.y+t.height<=e.y||t.y>=e.y+e.height)return!1;return!0}};function i(t,e){var n=[],i="collide";return t instanceof o.a==!0&&(n.push(t),i+="Point"),e instanceof o.a==!0&&(n.push(e),i+="Point"),-1===n.indexOf(t)&&t instanceof o.b==!0&&(n.push(t),i+="Rectangle"),-1===n.indexOf(e)&&e instanceof o.b==!0&&(n.push(e),i+="Rectangle"),r[i].apply(null,n)}},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";function o(){!0===this.debug&&(void 0===this.$.debugging&&(this.$.debugging={},this.$.debugging.active=!0,this.$.debugging.optional=!1),this.$.world.system("debug-inputs",[],this.systems.debug.inputs),!0===this.$.debugging.active&&(this.$.world.system("debug-camera",[],this.systems.debug.camera),!0===this.$.debugging.optional&&(this.$.world.system("debug-hitbox",["cameras","hitbox","position"],this.systems.debug.hitbox),this.$.world.system("debug-forces",["cameras","forces","position"],this.systems.debug.forces)),this.$.world.system("debug-spritesheet",["cameras","images","position"],this.systems.debug.spritesheet),this.$.world.system("debug-pause",[],this.systems.debug.pause))),this.$.controllers.inputs.length=0,this.$.camera.clean(),this.$.interface.clean()}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(){this.$.controllers.inputs.forEach(function(t){}),this.$.world.system("inputs",["inputs"],this.systems.common.inputs)}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(){console.log("lifecycle :","destroy demo scene"),console.log("---------"),this.$.controllers.destroy(),delete this.$.camera,delete this.$.interface,delete this.$.controllers,delete this.$.debugging,delete this.$.world}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(){console.log("lifecycle :","panic demo scene"),this.load("loading")}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(){this.context.fillStyle="#000000",this.context.fillRect(0,0,this.size.width,this.size.height),this.$.world.system("images",["cameras","images","position"],this.systems.common.images),this.$.world.system("text",["cameras","position","text"],this.systems.common.text),this.$.camera.render(),this.$.interface.render()}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(){console.log("lifecycle :","resize demo scene")}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(){console.log("lifecycle :","setup demo scene"),this.$.controllers=this.snippets.common["setup-inputs"]("demo"),this.$.camera=this.snippets.common["setup-camera"]("default","cover",480,320,1),this.$.interface=this.snippets.common["setup-camera"]("interface","contain-framed",480,320,1),this.$.world=this.snippets.common["setup-world"]()}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function i(){var t=this;console.log("lifecycle :","start demo scene"),this.$.world.initialize([].concat(o(this.pools.demo.start()),o(this.pools.demo.chalet()),o(this.pools.demo.forest()),o(this.pools.demo.cliff()),o(this.pools.demo["04-forest"]()),o(this.pools.demo["05-hospital"]()))),this.$.camera.look(function(){return t.$.world.get("demo-character").get("position").x},function(){return t.$.world.get("demo-character").get("position").y-32}),this.$.interface.look(function(){return 0},function(){return 0})}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";function o(){this.$.world.system("previous",[],this.systems.common.previous),this.$.world.system("timeout",["timeout"],this.systems.common.timeout),this.$.world.system("commands",["commands"],this.systems.common.commands),this.$.world.system("state",["state"],this.systems.common.state),this.$.world.system("forces",["forces"],this.systems.common.forces),this.$.world.system("velocity",["position","velocity"],this.systems.common.velocity),this.$.world.system("fade",["fade"],this.systems.common.fade),this.$.world.system("hitbox",["hitbox","position","previous"],this.systems.common.hitbox),this.$.world.system("velocity",["position","velocity"],this.systems.common.velocity),this.$.world.system("spritesheets",["images"],this.systems.common.spritesheets),this.$.camera.update(this.delta),this.$.interface.update(this.delta)}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(){}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(){}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(){console.log("lifecycle :","destroy loading scene"),console.log("---------"),delete this.$.timeout}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(){console.log("lifecycle :","panic loading scene")}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(){this.context.fillStyle="#222034",this.context.fillRect(0,0,this.size.width,this.size.height),this.context.font="16px Courier New",this.context.textAlign="start",this.context.textBaseline="top",this.context.fillStyle="#ffffff",this.context.fillText("/ Theatre",8,8),this.context.fillStyle="#cbdbfc",this.context.fillText("$ preloading assets...",8,32),!1===this.preloading&&(this.context.fillStyle="#99e550",this.context.fillText("$ preloading completed",8,56),this.context.fillStyle="#cbdbfc",this.context.fillText("$ loading demo scene...",8,80))}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(){console.log("lifecycle :","resize loading scene")}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(){console.log("lifecycle :","setup loading scene"),this.$.timeout=0}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(){console.log("lifecycle :","start loading scene")}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(){!1===this.preloading&&(this.$.timeout+=this.delta,this.$.timeout>=1e3&&this.load("splash"))}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(){!0===this.debug&&(void 0===this.$.debugging&&(this.$.debugging={},this.$.debugging.active=!0,this.$.debugging.optional=!1),this.$.world.system("debug-inputs",[],this.systems.debug.inputs),!0===this.$.debugging.active&&(this.$.world.system("debug-camera",[],this.systems.debug.camera),!0===this.$.debugging.optional&&(this.$.world.system("debug-hitbox",["cameras","hitbox","position"],this.systems.debug.hitbox),this.$.world.system("debug-forces",["cameras","forces","position"],this.systems.debug.forces)),this.$.world.system("debug-spritesheet",["cameras","images","position"],this.systems.debug.spritesheet),this.$.world.system("debug-pause",[],this.systems.debug.pause))),this.$.controllers.inputs.length=0,this.$.camera.clean(),this.$.interface.clean()}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(){this.$.controllers.inputs.forEach(function(t){}),this.$.world.system("inputs",["inputs"],this.systems.common.inputs)}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(){console.log("lifecycle :","destroy splash scene"),console.log("---------"),this.$.controllers.destroy(),delete this.$.camera,delete this.$.interface,delete this.$.controllers,delete this.$.debugging,delete this.$.world}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(){console.log("lifecycle :","panic splash scene")}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(){this.context.fillStyle="#000000",this.context.fillRect(0,0,this.size.width,this.size.height),this.$.world.system("images",["cameras","images","position"],this.systems.common.images),this.$.world.system("text",["cameras","position","text"],this.systems.common.text),this.$.camera.render(),this.$.interface.render()}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(){console.log("lifecycle :","resize splash scene")}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(){console.log("lifecycle :","setup splash scene"),this.$.controllers=this.snippets.common["setup-inputs"]("splash"),this.$.camera=this.snippets.common["setup-camera"]("default","contain-framed",480,320,1),this.$.interface=this.snippets.common["setup-camera"]("interface","contain-framed",480,320,1),this.$.world=this.snippets.common["setup-world"]()}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function i(){console.log("lifecycle :","start splash scene"),this.$.world.initialize(o(this.pools.splash.start())),this.$.camera.look(function(){return 0},function(){return 0}),this.$.interface.look(function(){return 0},function(){return 0})}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";function o(){this.$.world.system("previous",[],this.systems.common.previous),this.$.world.system("timeout",["timeout"],this.systems.common.timeout),this.$.world.system("commands",["commands"],this.systems.common.commands),this.$.world.system("state",["state"],this.systems.common.state),this.$.world.system("forces",["forces"],this.systems.common.forces),this.$.world.system("velocity",["position","velocity"],this.systems.common.velocity),this.$.world.system("fade",["fade"],this.systems.common.fade),this.$.world.system("hitbox",["hitbox","position","previous"],this.systems.common.hitbox),this.$.world.system("velocity",["position","velocity"],this.systems.common.velocity),this.$.world.system("spritesheets",["images"],this.systems.common.spritesheets),this.$.camera.update(this.delta),this.$.interface.update(this.delta)}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return u});var o=n(32),r=n(33),i=n(34),s=n(35);function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function u(e){var c=e.container,u=e.debug||!1,h=e.expose||!1,f=e.framerate||60,l=e.panic||4e3,m=e.sharp||!1,d=e.speed||1,p={height:c.offsetHeight,width:c.offsetWidth},y=null,g=null,b=!1,v=0;function x(){var e=this,o=n(53);this.entities={},o.keys().forEach(function(t){var n=a(t.match(/^\.\/([^\/]+)\/([^\/]+)\.json$/),3),r=(n[0],n[1]),i=n[2];void 0===e.entities[r]&&(e.entities[r]={}),void 0===e.entities[r][i]&&(e.entities[r][i]={});var s=JSON.parse(JSON.stringify(o(t)));!1===s.hasOwnProperty("components")&&(s.components=[]);e.entities[r][i]=function(){return JSON.parse(JSON.stringify(s))}}),void 0!==t.hot&&t.hot.accept(o.id,function(){x.call(e),j.call(e)})}function w(t,e){this.delta=t,c.offsetWidth===this.size.width&&c.offsetHeight===this.size.height||function(){this.size.width=c.offsetWidth,this.size.height=c.offsetHeight,y.resize(this.size.width,this.size.height),this.scene.resize.call(this)}.call(this),!0===this.playing&&this.tick(),this.scene.before.call(this),v>0&&function(t){for(;v>0;)!0===t?this.scene.panic.call(this):this.scene.update.call(this),v-=1,!0!==b?null===g||(this.scene.destroy.call(this),this.scene=this.scenes[g],this.scene.setup.call(this),this.scene.start.call(this),g=null):(this.scene.start.call(this),b=!1)}.call(this,e),this.scene.render.call(this),this.scene.after.call(this)}function j(){var e=this,o=n(84);this.pools={},o.keys().forEach(function(t){var n=a(t.match(/^\.\/([^\/]+)\/([^\/]+)\.json$/),3),r=(n[0],n[1]),i=n[2];void 0===e.pools[r]&&(e.pools[r]={}),void 0===e.pools[r][i]&&(e.pools[r][i]={});var s=JSON.parse(JSON.stringify(o(t)));s.forEach(function(t){!1===t.hasOwnProperty("components")&&(t.components=[]);var n=e.entities[t.entity.scope][t.entity.name]().components;t.components=n.concat(t.components),delete t.entity});e.pools[r][i]=function(){return JSON.parse(JSON.stringify(s))}}),void 0!==t.hot&&t.hot.accept(o.id,function(){j.call(e)})}this.$={},this.components={},this.debug=u,this.entities={},this.playing=!0,this.pools={},this.precision=3,this.preloading=!1,this.scenes={},this.size=p,this.snippets={},this.systems={},this.version="0.47.0",this.load=function(t){!0===this.debug&&console.warn("debugging :","load scene","("+this.loop.framerate+"fps @"+this.loop.speed+"x)"),g=t},this.pause=function(){!0===this.debug&&console.warn("debugging :","pause scene","("+this.loop.framerate+"fps @"+this.loop.speed+"x)"),this.playing=!1},this.play=function(){!0===this.debug&&console.warn("debugging :","play scene","("+this.loop.framerate+"fps @"+this.loop.speed+"x)"),this.playing=!0},this.restart=function(){!0===this.debug&&console.warn("debugging :","restart scene","("+this.loop.framerate+"fps @"+this.loop.speed+"x)"),b=!0},this.tick=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;!0===this.debug&&!1===this.playing&&console.warn("debugging :","tick scene","("+Math.round(100*this.delta)/100+"ms @"+this.loop.speed+"x)"),v+=t},function(){y=new o.a("2d","theatre",this.size.width,this.size.height,m),c.appendChild(y.element),y.focus(),this.container=c,this.context=y.context,this.element=y.element,this.assets={},this.delta=0,this.loop=new r.a(w.bind(this),f,d,l),function e(){var o=this,r=n(37);Object(s.a)(r,function(t){o.assets={},t.forEach(function(t){var e=t.getter,n=t.name,r=t.scope,i=(t.source,t.type);void 0===o.assets[i]&&(o.assets[i]={}),void 0===o.assets[i][r]&&(o.assets[i][r]={}),o.assets[i][r][n]=e}),o.preloading=!1}),void 0!==t.hot&&t.hot.accept(r.id,function(){e.call(o)}),this.preloading=!0}.call(this),function e(){var o=this,r=n(38);this.components={},r.keys().forEach(function(t){var e=t.match(/^\.\/([^\/]+)\.json$/)[1],n=r(t);o.components[e]=function(){return JSON.parse(JSON.stringify(n))}}),void 0!==t.hot&&t.hot.accept(r.id,function(){e.call(o),x.call(o),j.call(o)})}.call(this),x.call(this),j.call(this),function e(){var o=this,r=n(92);this.scenes={},r.keys().forEach(function(t){var e=t.match(/^\.\/([^\/]+)\/index\.js$/),n=a(e,2),i=(n[0],n[1]);o.scenes[i]=r(t)}),void 0!==t.hot&&t.hot.accept(r.id,function(){e.call(o)})}.call(this),function e(){var o=this,r=n(96);this.snippets={},r.keys().forEach(function(t){var e=t.match(/^\.\/([^\/]+)\/([^\/]+)\.js$/),n=a(e,3),s=(n[0],n[1]),c=n[2];void 0===o.snippets[s]&&(o.snippets[s]={}),void 0===o.snippets[s][c]&&(o.snippets[s][c]={});var u=r(t).default;!0===o.debug&&(u=Object(i.a)(u,o.pause)),o.snippets[s][c]=u.bind(o)}),void 0!==t.hot&&t.hot.accept(r.id,function(){e.call(o)})}.call(this),function e(){var o=this,r=n(136);this.systems={},r.keys().forEach(function(t){var e=t.match(/^\.\/([^\/]+)\/([^\/]+)\.js$/),n=a(e,3),i=(n[0],n[1]),s=n[2];void 0===o.systems[i]&&(o.systems[i]={}),void 0===o.systems[i][s]&&(o.systems[i][s]={}),o.systems[i][s]=r(t)[s]}),void 0!==t.hot&&t.hot.accept(r.id,function(){e.call(o)})}.call(this),this.scene=this.scenes.loading,this.scene.setup.call(this),this.scene.start.call(this),this.loop.update()}.call(this,e),!0===h&&(window.theatre=this)}}).call(this,n(3)(t))},function(t,e,n){"use strict";function o(t,e,n,o){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=document.createElement("canvas"),s=i.getContext(t);function a(){i.setAttribute("tabindex",0),i.focus()}function c(t,e){var n=window.devicePixelRatio||1;!0===r&&(n=Math.floor(n)),i.setAttribute("height",n*e),i.setAttribute("width",n*t),i.style.height=e+"px",i.style.width=t+"px",s.scale(n,n),!0===r&&(i.style.imageRendering="-moz-crisp-edges",i.style.imageRendering="-webkit-crisp-edges",i.style.imageRendering="crisp-edges",i.style.imageRendering="pixelated",s.imageSmoothingEnabled=!1)}i.setAttribute("id",e),i.addEventListener("mousedown",a),c(n,o),this.context=s,this.element=i,this.focus=a,this.resize=c}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4e3,r=0,i=null,s=!1;this.framerate=e,this.panic=o,this.speed=n,this.pause=function(){s=!0},this.play=function(){s=!1},this.tick=function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;requestAnimationFrame(function(){for(;n--;)t(1e3/e.framerate)})},this.update=function(){var e=performance.now();if(null!==i&&!1===s)for(r+=e-i;r>=1e3/this.framerate/this.speed&&!1===s;){var n=r>=this.panic/this.speed,o=!1===n?o=1e3/this.framerate:r*this.speed;r-=o/this.speed,t(o,n)}requestAnimationFrame(this.update.bind(this)),i=e}}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(t,e){return function(){try{for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t.call.apply(t,[this].concat(o))}catch(t){console.error(t),"function"==typeof e&&e.call(this)}}}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function i(t,e){var n=[];t.keys().map(function(e){var r=o(e.match(/(?!\.\/|\/)(.+?)(?=(?:\.[a-zA-Z0-9]+$)|\/)/g),3),i=r[0],s=r[1],a={getter:null,name:r[2],scope:s,source:null,type:i},c=new Promise(function(n,o){if("datasets"===a.type)t(e).then(function(t){a.source=t,a.getter=function(){return JSON.parse(JSON.stringify(t))},n(a)});else if("images"===a.type){var r=new Image;t(e).then(function(t){r.src=t,r.onload=function(){a.source=t,a.getter=function(){return r},n(a)}})}else"sounds"===a.type&&t(e).then(function(t){var e=new Audio(t);e.oncanplaythrough=function(){a.source=t,a.getter=function(){return e.cloneNode()},n(a)}})});n.push(c)}),Promise.all(n).then(e)}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";n.r(e),new(n(31).a)({container:document.body,debug:!1,expose:!1,framerate:60,panic:4e3,sharp:!0,speed:1})},function(t,e,n){var o={"./datasets/common/font-theatre-black-6x10.json":[158,1],"./datasets/common/font-theatre-mask-black-6x10.json":[159,2],"./datasets/common/font-theatre-mask-white-6x10.json":[160,3],"./datasets/common/font-theatre-red-6x10.json":[161,4],"./datasets/common/font-theatre-white-6x10.json":[162,5],"./datasets/common/font-theatre-white-shadow-black-6x10.json":[163,6],"./datasets/common/force-placeholder.json":[164,7],"./datasets/common/spritesheet-grid-idle.json":[165,8],"./datasets/common/spritesheet-placeholder-idle.json":[166,9],"./datasets/debug/inputs.json":[167,10],"./datasets/demo/force-character.json":[168,11],"./datasets/demo/force-gravity.json":[169,12],"./datasets/demo/inputs.json":[170,13],"./datasets/demo/spritesheet-00-splash.json":[171,14],"./datasets/demo/spritesheet-01-chalet-backlight.json":[172,15],"./datasets/demo/spritesheet-01-chalet-frontlight.json":[173,16],"./datasets/demo/spritesheet-01-chalet-ground.json":[174,17],"./datasets/demo/spritesheet-02-forest-backlight.json":[175,18],"./datasets/demo/spritesheet-02-forest-frontlight.json":[176,19],"./datasets/demo/spritesheet-02-forest-ground.json":[177,20],"./datasets/demo/spritesheet-03-cliff-frontlight.json":[178,21],"./datasets/demo/spritesheet-03-cliff-ground.json":[179,22],"./datasets/demo/spritesheet-04-forest-backlight.json":[180,23],"./datasets/demo/spritesheet-04-forest-ground.json":[181,24],"./datasets/demo/spritesheet-05-hospital-ground.json":[182,25],"./datasets/demo/spritesheet-character-idle.json":[183,26],"./datasets/demo/spritesheet-character-run.json":[184,27],"./datasets/demo/spritesheet-character-sad.json":[185,28],"./datasets/splash/inputs.json":[186,29],"./images/common/font-theatre-black-6x10.png":[187,30],"./images/common/font-theatre-mask-black-6x10.png":[188,31],"./images/common/font-theatre-mask-white-6x10.png":[189,32],"./images/common/font-theatre-red-6x10.png":[190,33],"./images/common/font-theatre-white-6x10.png":[191,34],"./images/common/font-theatre-white-shadow-black-6x10.png":[192,35],"./images/common/grid-640x640.png":[193,36],"./images/common/placeholder-8x1.png":[194,37],"./images/demo/00-splash-480x320.png":[195,38],"./images/demo/01-chalet-backlight-480x320.png":[196,39],"./images/demo/01-chalet-frontlight-480x320.png":[197,40],"./images/demo/01-chalet-ground-480x320.png":[198,41],"./images/demo/02-forest-backlight-480x320.png":[199,42],"./images/demo/02-forest-frontlight-480x320.png":[200,43],"./images/demo/02-forest-ground-480x320.png":[201,44],"./images/demo/03-cliff-640x320.png":[202,45],"./images/demo/03-cliff-frontlight-480x640.png":[203,46],"./images/demo/03-cliff-frontlight-640x320.png":[204,47],"./images/demo/03-cliff-ground-480x640.png":[205,48],"./images/demo/04-forest-backlight-480x320.png":[206,49],"./images/demo/04-forest-ground-480x320.png":[207,50],"./images/demo/05-hospital-ground-480x320-sheet.png":[208,51],"./images/demo/05-hospital-ground-480x320.png":[209,52],"./images/demo/character-idle-32x64.png":[210,53],"./images/demo/character-run-64x64.png":[211,54],"./images/demo/character-sad-64x64.png":[212,55],"./sounds/demo/background.mp3":[213,56],"./sounds/demo/breathe.mp3":[214,57],"./sounds/demo/cliff.mp3":[215,58],"./sounds/demo/fall.mp3":[216,59],"./sounds/demo/run.mp3":[217,60]};function r(t){var e=o[t];return e?n.e(e[1]).then(function(){var t=e[0];return n(t)}):Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}r.keys=function(){return Object.keys(o)},r.id=37,t.exports=r},function(t,e,n){var o={"./cameras.json":39,"./commands.json":40,"./fade.json":41,"./forces.json":42,"./hitbox.json":43,"./images.json":44,"./inputs.json":45,"./opacity.json":46,"./position.json":47,"./previous.json":48,"./state.json":49,"./text.json":50,"./timeout.json":51,"./velocity.json":52};function r(t){var e=i(t);return n(e)}function i(t){var e=o[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=38},function(t){t.exports=[{$camera:{type:"$",name:"camera"},opacity:1}]},function(t){t.exports=[{$command:{type:"snippets",scope:"common",name:"handle-command"},parameters:["Hello, friend."]}]},function(t){t.exports={opacity:0,duration:5e3,$easing:{type:"snippets",scope:"common",name:"easing-in-cubic"},$ending:{type:"snippets",scope:"common",name:"handle-fade-ending"},elapsed:0}},function(t){t.exports={placeholder:{type:"datasets",scope:"common",name:"force-placeholder"}}},function(t){t.exports={x:0,y:0,width:32,height:32,type:"dynamic",triggers:[{type:"static",conditions:[],$match:{type:"snippets",scope:"common",name:"handle-hitbox"},$unmatch:!1}]}},function(t){t.exports={"placeholder-idle":{type:"datasets",scope:"common",name:"spritesheet-placeholder-idle"}}},function(t){t.exports=[{actions:["CLICK_LEFT"],state:"DOWN",$command:{type:"snippets",scope:"common",name:"handle-command"}}]},function(t){t.exports={opacity:1}},function(t){t.exports={x:0,y:0,z:0}},function(t){t.exports={}},function(t){t.exports={state:{IDLE:1},$handling:{type:"snippets",scope:"common",name:"handle-state"},changes:[]}},function(t){t.exports={$font:{type:"datasets",scope:"common",name:"font-theatre-white-shadow-black-6x10"},anchor:{horizontal:"center",vertical:"center"},destination:[0,0,0,6,10],lines:["<text>"],opacity:1}},function(t){t.exports={duration:1e3,elapsed:0,$ending:{type:"snippets",scope:"common",name:"handle-timeout-ending"}}},function(t){t.exports={top:0,right:0,bottom:0,left:0}},function(t,e,n){var o={"./common/grid.json":54,"./common/placeholder.json":55,"./demo/00-splash.json":56,"./demo/01-chalet-backlight.json":57,"./demo/01-chalet-frontlight.json":58,"./demo/01-chalet-ground.json":59,"./demo/01-chalet-text-water-broke.json":60,"./demo/02-forest-backlight.json":61,"./demo/02-forest-frontlight.json":62,"./demo/02-forest-ground.json":63,"./demo/02-forest-text-told-you.json":64,"./demo/02-forest-trigger-text.json":65,"./demo/03-cliff-frontlight.json":66,"./demo/03-cliff-ground.json":67,"./demo/03-cliff-text-problem-baby.json":68,"./demo/03-cliff-trigger-text.json":69,"./demo/04-forest-backlight.json":70,"./demo/04-forest-ground.json":71,"./demo/04-forest-text.json":72,"./demo/04-forest-trigger-text.json":73,"./demo/05-hospital-dear-child.json":74,"./demo/05-hospital-ground.json":75,"./demo/05-hospital-text.json":76,"./demo/05-hospital-trigger-text.json":77,"./demo/character.json":78,"./demo/hitbox-1x1.json":79,"./demo/hitbox-1x4.json":80,"./demo/hitbox-2x1.json":81,"./demo/hitbox-4x1.json":82,"./demo/hitbox-8x1.json":83};function r(t){var e=i(t);return n(e)}function i(t){var e=o[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=53},function(t){t.exports={name:"grid",components:[{name:"cameras"},{name:"images",parameters:{"grid-idle":{type:"datasets",scope:"common",name:"spritesheet-grid-idle"}}},{name:"position"}]}},function(t){t.exports={name:"placeholder",components:[{name:"cameras",parameters:[{$camera:{type:"$",name:"camera"},opacity:1}]},{name:"images",parameters:{"placeholder-idle":{type:"datasets",scope:"common",name:"spritesheet-placeholder-idle"}}},{name:"position",parameters:{x:0,y:0,z:0}}]}},function(t){t.exports={name:"00-splash",components:[{name:"cameras"},{name:"images",parameters:{"00-splash":{type:"datasets",scope:"demo",name:"spritesheet-00-splash"}}},{name:"position"}]}},function(t){t.exports={name:"01-chalet-backlight",components:[{name:"cameras"},{name:"images",parameters:{"01-chalet-backlight":{type:"datasets",scope:"demo",name:"spritesheet-01-chalet-backlight"}}},{name:"position"}]}},function(t){t.exports={name:"01-chalet-frontlight",components:[{name:"cameras"},{name:"images",parameters:{"01-chalet-frontlight":{type:"datasets",scope:"demo",name:"spritesheet-01-chalet-frontlight"}}},{name:"position"}]}},function(t){t.exports={name:"01-chalet-ground",components:[{name:"cameras"},{name:"hitbox",parameters:{x:0,y:80,width:960,height:32,type:"top",triggers:[]}},{name:"images",parameters:{"01-chalet-ground":{type:"datasets",scope:"demo",name:"spritesheet-01-chalet-ground"}}},{name:"position"}]}},function(t){t.exports={name:"01-chalet-text-water-broke",components:[{name:"cameras",parameters:[{$camera:{type:"$",name:"interface"},opacity:1}]},{name:"fade"},{name:"position",parameters:{x:0,y:0,z:3}},{name:"text",parameters:{$font:{type:"datasets",scope:"common",name:"font-theatre-white-6x10"},anchor:{horizontal:"center",vertical:"center"},destination:[0,0,0,6,10],lines:['Her: "The BABY is coming!"'],opacity:1}}]}},function(t){t.exports={name:"02-forest-backlight",components:[{name:"cameras"},{name:"images",parameters:{"02-forest-backlight":{type:"datasets",scope:"demo",name:"spritesheet-02-forest-backlight"}}},{name:"position"}]}},function(t){t.exports={name:"02-forest-frontlight",components:[{name:"cameras"},{name:"images",parameters:{"02-forest-frontlight":{type:"datasets",scope:"demo",name:"spritesheet-02-forest-frontlight"}}},{name:"position"}]}},function(t){t.exports={name:"02-forest-ground",components:[{name:"cameras"},{name:"hitbox",parameters:{x:0,y:80,width:960,height:32,type:"top",triggers:[]}},{name:"images",parameters:{"02-forest-ground":{type:"datasets",scope:"demo",name:"spritesheet-02-forest-ground"}}},{name:"position"}]}},function(t){t.exports={name:"02-forest-told-you",components:[{name:"cameras",parameters:[{$camera:{type:"$",name:"interface"},opacity:1}]},{name:"fade"},{name:"position",parameters:{x:0,y:128,z:3}},{name:"text",parameters:{$font:{type:"datasets",scope:"common",name:"font-theatre-white-6x10"},anchor:{horizontal:"center",vertical:"center"},destination:[0,0,0,6,10],lines:['Her: "I told you to stay with me..."'],opacity:1}}]}},function(t){t.exports={name:"02-forest-trigger-text",components:[{name:"cameras"},{name:"hitbox",parameters:{x:0,y:0,width:32,height:64,type:"trigger-text",triggers:[]}}]}},function(t){t.exports={name:"03-cliff-frontlight",components:[{name:"cameras"},{name:"images",parameters:{"03-cliff-frontlight":{type:"datasets",scope:"demo",name:"spritesheet-03-cliff-frontlight"}}},{name:"position"}]}},function(t){t.exports={name:"03-cliff-ground",components:[{name:"cameras"},{name:"images",parameters:{"03-cliff-ground":{type:"datasets",scope:"demo",name:"spritesheet-03-cliff-ground"}}},{name:"position"}]}},function(t){t.exports={name:"03-cliff-text-problem-baby",components:[{name:"cameras",parameters:[{$camera:{type:"$",name:"interface"},opacity:1}]},{name:"fade"},{name:"position",parameters:{x:0,y:128,z:3}},{name:"text",parameters:{$font:{type:"datasets",scope:"common",name:"font-theatre-white-6x10"},anchor:{horizontal:"center",vertical:"center"},destination:[0,0,0,6,10],lines:['Her: "The doctor says the baby has a PROBLEM..."'],opacity:1}}]}},function(t){t.exports={name:"03-cliff-trigger-text",components:[{name:"cameras"},{name:"hitbox",parameters:{x:0,y:0,width:32,height:64,type:"trigger-text",triggers:[]}}]}},function(t){t.exports={name:"04-forest-backlight",components:[{name:"cameras"},{name:"images",parameters:{"04-forest-backlight":{type:"datasets",scope:"demo",name:"spritesheet-04-forest-backlight"}}},{name:"position"}]}},function(t){t.exports={name:"04-forest-ground",components:[{name:"cameras"},{name:"hitbox",parameters:{x:0,y:80,width:480,height:32,type:"top",triggers:[]}},{name:"images",parameters:{"04-forest-ground":{type:"datasets",scope:"demo",name:"spritesheet-04-forest-ground"}}},{name:"position"}]}},function(t){t.exports={name:"02-forest-told-you",components:[{name:"cameras",parameters:[{$camera:{type:"$",name:"interface"},opacity:1}]},{name:"fade"},{name:"position",parameters:{x:0,y:128,z:3}},{name:"text",parameters:{$font:{type:"datasets",scope:"common",name:"font-theatre-white-6x10"},anchor:{horizontal:"center",vertical:"center"},destination:[0,0,0,6,10],lines:['Her: "If you\'d LISTEN to ME and STAYED for once..."'],opacity:1}}]}},function(t){t.exports={name:"04-forest-trigger-text",components:[{name:"cameras"},{name:"hitbox",parameters:{x:0,y:0,width:32,height:64,type:"trigger-text",triggers:[]}}]}},function(t){t.exports={name:"05-hospital",components:[{name:"cameras",parameters:[{$camera:{type:"$",name:"interface"},opacity:1}]},{name:"fade",parameters:{opacity:0,duration:5e3,$easing:{type:"snippets",scope:"common",name:"easing-in-cubic"},$ending:{type:"snippets",scope:"demo",name:"load-splash"},elapsed:0}},{name:"position",parameters:{x:0,y:128,z:3}},{name:"text",parameters:{$font:{type:"datasets",scope:"common",name:"font-theatre-white-6x10"},anchor:{horizontal:"center",vertical:"center"},destination:[0,0,0,6,10],lines:['Me: "Dear Child..."'],opacity:1}}]}},function(t){t.exports={name:"05-hospital-ground",components:[{name:"cameras"},{name:"hitbox",parameters:{x:0,y:80,width:480,height:32,type:"top",triggers:[]}},{name:"images",parameters:{"05-hospital-ground":{type:"datasets",scope:"demo",name:"spritesheet-05-hospital-ground"}}},{name:"position"}]}},function(t){t.exports={name:"05-hospital",components:[{name:"cameras",parameters:[{$camera:{type:"$",name:"interface"},opacity:1}]},{name:"fade"},{name:"position",parameters:{x:0,y:128,z:3}},{name:"text",parameters:{$font:{type:"datasets",scope:"common",name:"font-theatre-red-6x10"},anchor:{horizontal:"center",vertical:"center"},destination:[0,0,0,6,10],lines:['Doctors: "Sorry, we couldn\'t save your wife..."'],opacity:1}},{name:"timeout",parameters:{duration:5e3,elapsed:0,$ending:{type:"snippets",scope:"demo",name:"handle-timeout-text"}}}]}},function(t){t.exports={name:"05-hospital-trigger-text",components:[{name:"cameras"},{name:"hitbox",parameters:{x:0,y:0,width:32,height:64,type:"trigger-text",triggers:[]}}]}},function(t){t.exports={name:"character",components:[{name:"cameras"},{name:"forces",parameters:{gravity:{type:"datasets",scope:"demo",name:"force-gravity"}}},{name:"hitbox",parameters:{x:0,y:-8,width:32,height:64,type:"dynamic",triggers:[{type:"left",conditions:[],$match:{type:"snippets",scope:"common",name:"handle-hitbox-right"},$unmatch:!1},{type:"top",conditions:[],$match:{type:"snippets",scope:"common",name:"handle-hitbox-bottom"},$unmatch:!1},{type:"trigger-text",conditions:[],$match:{type:"snippets",scope:"demo",name:"trigger-text"},$unmatch:!1}]}},{name:"images",parameters:{character:{type:"datasets",scope:"demo",name:"spritesheet-character-idle"}}},{name:"inputs",parameters:[{actions:["KEY_RIGHT","GAMEPAD_RIGHT","GAMEPAD_LS_RIGHT"],state:"DOWN",$command:{type:"snippets",scope:"demo",name:"handle-command-right-start"}},{actions:["KEY_RIGHT","GAMEPAD_RIGHT","GAMEPAD_LS_RIGHT"],state:"UP",$command:{type:"snippets",scope:"demo",name:"handle-command-right-end"}}]}]}},function(t){t.exports={name:"hitbox-1x1",components:[{name:"cameras"},{name:"hitbox",parameters:{x:0,y:0,width:32,height:32,type:"top",triggers:[]}},{name:"position"}]}},function(t){t.exports={name:"hitbox-1x1",components:[{name:"cameras"},{name:"hitbox",parameters:{x:0,y:0,width:32,height:32,type:"top",triggers:[]}},{name:"position"}]}},function(t){t.exports={name:"hitbox-2x1",components:[{name:"cameras"},{name:"hitbox",parameters:{x:0,y:0,width:64,height:32,type:"top",triggers:[]}},{name:"position"}]}},function(t){t.exports={name:"hitbox-4x1",components:[{name:"cameras"},{name:"hitbox",parameters:{x:0,y:0,width:128,height:32,type:"top",triggers:[]}},{name:"position"}]}},function(t){t.exports={name:"hitbox-8x1",components:[{name:"cameras"},{name:"hitbox",parameters:{x:0,y:0,width:256,height:32,type:"top",triggers:[]}},{name:"position"}]}},function(t,e,n){var o={"./demo/04-forest.json":85,"./demo/05-hospital.json":86,"./demo/chalet.json":87,"./demo/cliff.json":88,"./demo/forest.json":89,"./demo/start.json":90,"./splash/start.json":91};function r(t){var e=i(t);return n(e)}function i(t){var e=o[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=84},function(t){t.exports=[{name:"demo-04-forest-ground",entity:{scope:"demo",name:"04-forest-ground"},components:[{name:"position",parameters:{x:2400,y:320,z:0}}]},{name:"demo-04-forest-backlight",entity:{scope:"demo",name:"04-forest-backlight"},components:[{name:"position",parameters:{x:2400,y:320,z:-1}}]},{name:"demo-04-forest-trigger-text",entity:{scope:"demo",name:"04-forest-trigger-text"},components:[{name:"position",parameters:{x:2176,y:352,z:0}}]}]},function(t){t.exports=[{name:"demo-05-hospital-ground",entity:{scope:"demo",name:"05-hospital-ground"},components:[{name:"position",parameters:{x:2880,y:320,z:0}}]},{name:"demo-05-hospital-trigger-text",entity:{scope:"demo",name:"05-hospital-trigger-text"},components:[{name:"position",parameters:{x:3008,y:352,z:0}}]}]},function(t){t.exports=[{name:"demo-01-chalet-ground",entity:{scope:"demo",name:"01-chalet-ground"}},{name:"demo-01-chalet-backlight",entity:{scope:"demo",name:"01-chalet-backlight"}},{name:"demo-01-chalet-frontlight",entity:{scope:"demo",name:"01-chalet-frontlight"}},{name:"demo-01-chalet-text-water-broke",entity:{scope:"demo",name:"01-chalet-text-water-broke"},components:[{name:"position",parameters:{x:0,y:128,z:0}}]}]},function(t){t.exports=[{name:"demo-03-cliff-ground",entity:{scope:"demo",name:"03-cliff-ground"},components:[{name:"position",parameters:{x:1920,y:0,z:0}}]},{name:"demo-03-cliff-frontlight",entity:{scope:"demo",name:"03-cliff-frontlight"},components:[{name:"position",parameters:{x:1920,y:0,z:0}}]},{name:"demo-03-cliff-trigger-text",entity:{scope:"demo",name:"03-cliff-trigger-text"},components:[{name:"position",parameters:{x:1456,y:32,z:0}}]},{name:"cliff-hitbox-a",entity:{scope:"demo",name:"hitbox-8x1"},components:[{name:"position",parameters:{x:1568,y:80,z:0}}]},{name:"cliff-hitbox-b",entity:{scope:"demo",name:"hitbox-1x1"},components:[{name:"position",parameters:{x:1710,y:80,z:0}}]},{name:"cliff-hitbox-c",entity:{scope:"demo",name:"hitbox-2x1"},components:[{name:"position",parameters:{x:1758,y:112,z:0}}]},{name:"cliff-hitbox-d",entity:{scope:"demo",name:"hitbox-1x1"},components:[{name:"position",parameters:{x:1774,y:144,z:0}}]},{name:"cliff-hitbox-e",entity:{scope:"demo",name:"hitbox-2x1"},components:[{name:"position",parameters:{x:1790,y:176,z:0}}]},{name:"cliff-hitbox-f",entity:{scope:"demo",name:"hitbox-2x1"},components:[{name:"position",parameters:{x:1822,y:208,z:0}}]},{name:"cliff-hitbox-g",entity:{scope:"demo",name:"hitbox-2x1"},components:[{name:"position",parameters:{x:1854,y:368,z:0}}]},{name:"cliff-hitbox-h",entity:{scope:"demo",name:"hitbox-8x1"},components:[{name:"position",parameters:{x:1982,y:400,z:0}}]},{name:"cliff-hitbox-i",entity:{scope:"demo",name:"hitbox-2x1"},components:[{name:"position",parameters:{x:2128,y:400,z:0}}]}]},function(t){t.exports=[{name:"demo-02-forest-ground",entity:{scope:"demo",name:"02-forest-ground"},components:[{name:"position",parameters:{x:960,y:0,z:0}}]},{name:"demo-02-forest-backlight",entity:{scope:"demo",name:"02-forest-backlight"},components:[{name:"position",parameters:{x:960,y:0,z:-1}}]},{name:"demo-02-forest-trigger-text",entity:{scope:"demo",name:"02-forest-trigger-text"},components:[{name:"position",parameters:{x:496,y:32,z:0}}]}]},function(t){t.exports=[{name:"demo-character",entity:{scope:"demo",name:"character"},components:[{name:"position",parameters:{x:-224,y:40,z:2}}]}]},function(t){t.exports=[{name:"splash",entity:{scope:"demo",name:"00-splash"},components:[{name:"fade"},{name:"timeout",parameters:{duration:5e3,elapsed:0,$ending:{type:"snippets",scope:"demo",name:"start-game"}}}]}]},function(t,e,n){var o={"./demo/index.js":93,"./loading/index.js":94,"./splash/index.js":95};function r(t){var e=i(t);return n(e)}function i(t){var e=o[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=92},function(t,e,n){"use strict";n.r(e),function(t){var o=n(4);n.d(e,"after",function(){return o.a});var r=n(5);n.d(e,"before",function(){return r.a});var i=n(6);n.d(e,"destroy",function(){return i.a});var s=n(7);n.d(e,"panic",function(){return s.a});var a=n(8);n.d(e,"render",function(){return a.a});var c=n(9);n.d(e,"resize",function(){return c.a});var u=n(10);n.d(e,"setup",function(){return u.a});var h=n(11);n.d(e,"start",function(){return h.a});var f=n(12);n.d(e,"update",function(){return f.a}),void 0!==t.hot&&t.hot.accept(["./after.js","./before.js","./destroy.js","./panic.js","./render.js","./resize.js","./setup.js","./start.js","./update.js"])}.call(this,n(3)(t))},function(t,e,n){"use strict";n.r(e),function(t){var o=n(13);n.d(e,"after",function(){return o.a});var r=n(14);n.d(e,"before",function(){return r.a});var i=n(15);n.d(e,"destroy",function(){return i.a});var s=n(16);n.d(e,"panic",function(){return s.a});var a=n(17);n.d(e,"render",function(){return a.a});var c=n(18);n.d(e,"resize",function(){return c.a});var u=n(19);n.d(e,"setup",function(){return u.a});var h=n(20);n.d(e,"start",function(){return h.a});var f=n(21);n.d(e,"update",function(){return f.a}),void 0!==t.hot&&t.hot.accept(["./after.js","./before.js","./destroy.js","./panic.js","./render.js","./resize.js","./setup.js","./start.js","./update.js"])}.call(this,n(3)(t))},function(t,e,n){"use strict";n.r(e),function(t){var o=n(22);n.d(e,"after",function(){return o.a});var r=n(23);n.d(e,"before",function(){return r.a});var i=n(24);n.d(e,"destroy",function(){return i.a});var s=n(25);n.d(e,"panic",function(){return s.a});var a=n(26);n.d(e,"render",function(){return a.a});var c=n(27);n.d(e,"resize",function(){return c.a});var u=n(28);n.d(e,"setup",function(){return u.a});var h=n(29);n.d(e,"start",function(){return h.a});var f=n(30);n.d(e,"update",function(){return f.a}),void 0!==t.hot&&t.hot.accept(["./after.js","./before.js","./destroy.js","./panic.js","./render.js","./resize.js","./setup.js","./start.js","./update.js"])}.call(this,n(3)(t))},function(t,e,n){var o={"./common/easing-in-cubic-follow.js":97,"./common/easing-in-cubic.js":98,"./common/easing-in-quart-follow.js":99,"./common/easing-in-quart.js":100,"./common/easing-linear.js":101,"./common/easing-out-cubic.js":102,"./common/easing-out-quart.js":103,"./common/easing-sine-half.js":104,"./common/easing-sine.js":105,"./common/get-velocity.js":106,"./common/handle-command.js":107,"./common/handle-fade-ending.js":108,"./common/handle-forces-ending.js":109,"./common/handle-hitbox-bottom.js":110,"./common/handle-hitbox-right.js":111,"./common/handle-hitbox.js":112,"./common/handle-state.js":113,"./common/handle-timeout-ending.js":114,"./common/remove-entity.js":115,"./common/remove-fade.js":116,"./common/remove-forces.js":117,"./common/remove-hitbox.js":118,"./common/remove-timeout.js":119,"./common/restart.js":120,"./common/setup-camera.js":156,"./common/setup-inputs.js":155,"./common/setup-world.js":157,"./demo/add-character-spritesheet-sad.js":121,"./demo/add-fade.js":122,"./demo/handle-command-down-end.js":123,"./demo/handle-command-down-start.js":124,"./demo/handle-command-left-end.js":125,"./demo/handle-command-left-start.js":126,"./demo/handle-command-right-end.js":127,"./demo/handle-command-right-start.js":128,"./demo/handle-command-up-end.js":129,"./demo/handle-command-up-start.js":130,"./demo/handle-state.js":131,"./demo/handle-timeout-text.js":132,"./demo/load-splash.js":133,"./demo/start-game.js":134,"./demo/trigger-text.js":135};function r(t){var e=i(t);return n(e)}function i(t){var e=o[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=96},function(t,e,n){"use strict";n.r(e);var o=n(1);e.default=function(){return o.b}},function(t,e,n){"use strict";n.r(e);var o=n(1);e.default=function(){return o.a}},function(t,e,n){"use strict";n.r(e);var o=n(1);e.default=function(){return o.d}},function(t,e,n){"use strict";n.r(e);var o=n(1);e.default=function(){return o.c}},function(t,e,n){"use strict";n.r(e);var o=n(1);e.default=function(){return Object(o.h)(1)}},function(t,e,n){"use strict";n.r(e);var o=n(1);e.default=function(){return o.f}},function(t,e,n){"use strict";n.r(e);var o=n(1);e.default=function(){return o.g}},function(t,e,n){"use strict";n.r(e),e.default=function(){return function(t){return Math.sin(Math.PI*t)}}},function(t,e,n){"use strict";n.r(e),e.default=function(){return function(t){return Math.sin(2*Math.PI*t)}}},function(t,e,n){"use strict";n.r(e),e.default=function(t){return!1===t.has("velocity")&&t.add({name:"velocity",parameters:{top:0,right:0,bottom:0,left:0}}),t.get("velocity")}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){console.log("debugging :","component","'command'"),console.log(e),console.log("debugging :","entity","'"+t.name+"'"),console.log(t)}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){console.log("debugging :","component","'fade'","(ending)"),console.log(e),console.log("debugging :","entity","'"+t.name+"'"),console.log(t)}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){console.log("debugging :","component","'forces'","(ending)"),console.log(e),console.log("debugging :","entity","'"+t.name+"'"),console.log(t)}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){var n=this.snippets.common["get-velocity"](t);!0===e.from.bottom&&(n.top=Math.max(n.top,e.delta.bottom)),t.get("forces").gravity={type:"datasets",scope:"demo",name:"force-gravity"}}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){var n=this.snippets.common["get-velocity"](t);!0===e.from.right&&(n.left=Math.max(n.left,e.delta.right))}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){var n=this.snippets.common["get-velocity"](t);!0===e.from.top&&(n.bottom=Math.max(n.bottom,e.delta.top)),!0===e.from.right&&(n.left=Math.max(n.left,e.delta.right)),!0===e.from.bottom&&(n.top=Math.max(n.top,e.delta.bottom)),!0===e.from.left&&(n.right=Math.max(n.right,e.delta.left))}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){console.log("debugging :","component","'state'"),console.log(e),console.log("debugging :","entity","'"+t.name+"'"),console.log(t)}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){console.log("debugging :","component","'timeout'","(ending)"),console.log(e),console.log("debugging :","entity","'"+t.name+"'"),console.log(t)}},function(t,e,n){"use strict";n.r(e),e.default=function(t){this.$.world.remove(t)}},function(t,e,n){"use strict";n.r(e),e.default=function(t){t.remove("fade")}},function(t,e,n){"use strict";n.r(e),e.default=function(t){t.remove("forces")}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){t.remove("hitbox")}},function(t,e,n){"use strict";n.r(e),e.default=function(t){t.remove("timeout")}},function(t,e,n){"use strict";n.r(e),e.default=function(){this.restart()}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){t.get("images").character={type:"datasets",scope:"demo",name:"spritesheet-character-sad"},this.$.fall=this.assets.sounds.demo.fall(),this.$.fall.play()}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){t.add({name:"fade",parameters:{opacity:1,duration:800,$easing:{type:"snippets",scope:"common",name:"easing-in-cubic"},$ending:{type:"snippets",scope:"common",name:"handle-fade-ending"},elapsed:e}})}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){var n=t.get("state");n.changes.push({before:{DOWN:n.state.DOWN},after:{DOWN:0}}),n.state.DOWN=0}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){var n=t.get("state");n.changes.push({before:{UP:n.state.UP,DOWN:n.state.DOWN},after:{UP:0,DOWN:1}}),n.state.UP=0,n.state.DOWN=1}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){var n=t.get("state");n.changes.push({before:{LEFT:n.state.LEFT},after:{LEFT:0}}),n.state.LEFT=0}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){var n=t.get("state");n.changes.push({before:{RIGHT:n.state.RIGHT,LEFT:n.state.LEFT},after:{RIGHT:0,LEFT:1}}),n.state.RIGHT=0,n.state.LEFT=1}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){t.get("images").character={type:"datasets",scope:"demo",name:"spritesheet-character-idle"},delete t.get("forces").run,void 0!==this.$.breathe&&(this.$.breathe.pause(),delete this.$.breathe),void 0!==this.$.run&&(this.$.run.pause(),delete this.$.run)}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){t.get("images").character={type:"datasets",scope:"demo",name:"spritesheet-character-run"},t.get("forces").run={type:"datasets",scope:"demo",name:"force-character"},void 0!==this.$.breathe&&(this.$.breathe.pause(),delete this.$.breathe),this.$.breathe=this.assets.sounds.demo.breathe(),this.$.breathe.loop=!0,this.$.breathe.play(),void 0!==this.$.run&&(this.$.run.pause(),delete this.$.run),this.$.run=this.assets.sounds.demo.run(),this.$.run.loop=!0,this.$.run.play(),void 0===this.$.background&&(this.$.background=this.assets.sounds.demo.background(),this.$.background.loop=!0,this.$.background.play(),console.log("plop"))}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){var n=t.get("state");n.changes.push({before:{UP:n.state.UP},after:{UP:0}}),n.state.UP=0}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){var n=t.get("state");n.changes.push({before:{UP:n.state.UP,DOWN:n.state.DOWN},after:{UP:1,DOWN:0}}),n.state.UP=1,n.state.DOWN=0}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){var n=t.get("state").state,o=t.get("images");switch(delete o["character-idle"],delete o["character-up"],delete o["character-right"],delete o["character-down"],delete o["character-left"],""+n.UP+n.RIGHT+n.DOWN+n.LEFT){case"0000":o["character-idle"]={type:"datasets",scope:"demo",name:"spritesheet-character-idle"};break;case"1000":o["character-up"]={type:"datasets",scope:"demo",name:"spritesheet-character-up"};break;case"1100":case"0100":case"0110":o["character-right"]={type:"datasets",scope:"demo",name:"spritesheet-character-right"};break;case"0010":o["character-down"]={type:"datasets",scope:"demo",name:"spritesheet-character-down"};break;case"0011":case"0001":case"1001":o["character-left"]={type:"datasets",scope:"demo",name:"spritesheet-character-left"}}}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){this.$.world.add(this.entities.demo["05-hospital-dear-child"]()),this.$.world.get("demo-05-hospital-ground").add({name:"fade"}),this.$.world.get("demo-character").add({name:"fade"})}},function(t,e,n){"use strict";n.r(e),e.default=function(){this.load("splash")}},function(t,e,n){"use strict";n.r(e),e.default=function(){this.load("demo")}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e,n){console.log(n.name),"demo-02-forest-trigger-text"===n.name&&this.$.world.add(this.entities.demo["02-forest-text-told-you"]()),"demo-03-cliff-trigger-text"===n.name&&(this.$.world.add(this.entities.demo["03-cliff-text-problem-baby"]()),this.$.cliff=this.assets.sounds.demo.cliff(),this.$.cliff.play()),"demo-04-forest-trigger-text"===n.name&&this.$.world.add(this.entities.demo["04-forest-text"]()),"demo-05-hospital-trigger-text"===n.name&&(this.$.world.add(this.entities.demo["05-hospital-text"]()),t.remove("inputs"),t.remove("forces"),void 0!==this.$.breathe&&(this.$.breathe.pause(),delete this.$.breathe),void 0!==this.$.run&&(this.$.run.pause(),delete this.$.run),t.get("images").character={type:"datasets",scope:"demo",name:"spritesheet-character-idle"},t.add({name:"timeout",parameters:{duration:2e3,elapsed:0,$ending:{type:"snippets",scope:"demo",name:"add-character-spritesheet-sad"}}})),this.$.world.remove(n.name)}},function(t,e,n){var o={"./common/commands.js":137,"./common/fade.js":138,"./common/forces.js":139,"./common/hitbox.js":140,"./common/images.js":141,"./common/inputs.js":142,"./common/previous.js":143,"./common/spritesheets.js":144,"./common/state.js":145,"./common/text.js":146,"./common/timeout.js":147,"./common/velocity.js":148,"./debug/camera.js":149,"./debug/forces.js":150,"./debug/hitbox.js":151,"./debug/inputs.js":152,"./debug/pause.js":153,"./debug/spritesheet.js":154};function r(t){var e=i(t);return n(e)}function i(t){var e=o[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=136},function(t,e,n){"use strict";function o(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function a(t){var e=this;Object.entries(t).forEach(function(t){var n=r(t,2),i=(n[0],n[1]);i.get("commands").forEach(function(t){var n=t.$command,r=t.parameters;e.snippets[n.scope][n.name].apply(void 0,[i].concat(o(r)))}),i.remove("commands")})}n.r(e),n.d(e,"commands",function(){return a})},function(t,e,n){"use strict";n.r(e),n.d(e,"fade",function(){return a});var o=n(1);function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function a(t){var e=this;Object.entries(t).forEach(function(t){var n=i(t,2),s=(n[0],n[1]),a=s.get("fade");!1===s.has("opacity")&&s.add({name:"opacity",parameters:{opacity:1}});var c=s.get("opacity");void 0===a.fade&&(a.fade=a.opacity-c.opacity),void 0===a.faded&&(a.faded=0);var u=a.$easing,h=!1!==a.$easing?e.snippets[u.scope][u.name]():o.h(1),f=a.duration-a.elapsed,l=e.delta>f?f:e.delta,m=(a.elapsed+l)/a.duration,d=a.fade*h(m);if(c.opacity+=d-a.faded,c.opacity<0&&(c.opacity=0),a.faded=d,a.elapsed+=l,a.elapsed>=a.duration){if("object"===r(a.$ending)&&null!==a.$ending){var p=a.$ending;(0,e.snippets[p.scope][p.name])(s,e.delta-l)}s.remove("fade")}})}},function(t,e,n){"use strict";n.r(e),n.d(e,"forces",function(){return a});var o=n(1);function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function a(t){var e=this;Object.entries(t).forEach(function(t){var n=i(t,2),s=(n[0],n[1]),a=s.get("forces");!1===s.has("velocity")&&s.add({name:"velocity",parameters:{top:0,right:0,bottom:0,left:0}});var c=s.get("velocity"),u=[];Object.entries(a).forEach(function(t){var n=i(t,2),a=n[0],h=n[1];void 0===h.cache&&(h.cache=e.assets[h.type][h.scope][h.name]());var f=h.cache,l=!1===f.$ending,m=f.duration-f.elapsed,d=!1===l&&e.delta>m?m:e.delta,p=(f.elapsed+d)/f.duration,y=f.$easing,g=!1!==f.$easing?e.snippets[y.scope][y.name]():o.h(1);void 0===f.moved&&(f.moved={x:0,y:0});var b={x:f.x*g(p),y:f.y*g(p)},v=b.y-f.moved.y<0?Math.abs(b.y-f.moved.y):0,x=Math.max(b.x-f.moved.x,0),w=Math.max(b.y-f.moved.y,0),j=b.x-f.moved.x<0?Math.abs(b.x-f.moved.x):0;if(c.top=c.top+v,c.right=c.right+x,c.bottom=c.bottom+w,c.left=c.left+j,f.moved=b,f.elapsed+=e.delta,!1!==f.$handling){var $=f.$handling;(0,e.snippets[$.scope][$.name])(s,f.moved.x,f.moved.y,f.elapsed,function(){u.push(a)})}if(f.elapsed>=f.duration&&!1!==f.$ending&&-1===u.indexOf(a)){if("object"===r(f.$ending)&&null!==f.$ending){var O=f.$ending,E=e.snippets[O.scope][O.name],A=f.elapsed-f.duration;E(s,A)}u.push(a)}}),Object.entries(a).forEach(function(t){var e=i(t,2),n=e[0];e[1];-1!==u.indexOf(n)&&a.hasOwnProperty(n)&&delete a[n]}),0===Object.keys(a).length&&s.remove("forces")})}},function(t,e,n){"use strict";n.r(e),n.d(e,"hitbox",function(){return a});var o=n(2),r=n(0);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function a(t){var e=this,n={},s=[];Object.entries(t).forEach(function(e){var s=i(e,2),a=s[0],c=s[1],u=c.get("hitbox");if(0!==u.triggers.length){var h=c.get("position");Object.entries(t).forEach(function(t){var e=i(t,2),s=e[0],c=e[1];if(a!==s){var f=c.get("hitbox"),l=c.get("position"),m=new r.b(h.x+u.x-u.width/2,h.y+u.y-u.height/2,u.width,u.height),d=new r.b(l.x+f.x-f.width/2,l.y+f.y-f.height/2,f.width,f.height);!0===Object(o.a)(m,d)&&(void 0===n[a]&&(n[a]={}),void 0===n[a][f.type]&&(n[a][f.type]=[]),n[a][f.type].push(s))}})}}),Object.entries(t).forEach(function(t){var o=i(t,2),a=o[0],c=o[1],u=c.get("hitbox").triggers;0!==u.length&&u.forEach(function(t){var o=!0;if(void 0!==n[a]&&!1!==n[a].hasOwnProperty(t.type)||(o=!1),t.conditions.forEach(function(t){var e=t,r=e.replace("not:",""),i=e!==r;void 0!==n[a]&&n[a].hasOwnProperty(r)!==i||(o=!1)}),!1===o&&void 0!==t.$unmatch&&!1!==t.$unmatch){var i=t.$unmatch,u=i.scope,h=i.name;s.push(e.snippets[u][h].bind(e,c))}if(!0===o&&void 0!==t.$match&&!1!==t.$match){var f=c.get("hitbox"),l=c.get("position");n[a][t.type].forEach(function(n){var o=e.$.world.get(n),i=o.get("hitbox"),a=o.get("position"),u=new r.b(l.x+f.x-f.width/2,l.y+f.y-f.height/2,f.width,f.height),h=new r.b(a.x+i.x-i.width/2,a.y+i.y-i.height/2,i.width,i.height),m={top:u.y>h.y&&u.y<h.y+h.height?h.height-(u.y-h.y):0,right:u.x+u.width>h.x&&u.x+u.width<h.x+h.width?u.x+u.width-h.x:0,bottom:u.y+u.height>h.y&&u.y+u.height<h.y+h.height?u.y+u.height-h.y:0,left:u.x>h.x&&u.x<h.x+h.width?h.width-(u.x-h.x):0},d=c.get("previous").position,p=o.get("previous").position,y=c.get("previous").hitbox,g=o.get("previous").hitbox,b=new r.b(d.x+y.x-y.width/2,d.y+y.y-y.height/2,y.width,y.height),v=new r.b(p.x+g.x-g.width/2,p.y+g.y-g.height/2,g.width,g.height),x=!((b.x+b.width-v.x).toFixed(e.precision)<=0||(v.x+v.width-b.x).toFixed(e.precision)<=0),w=!((b.y+b.height-v.y).toFixed(e.precision)<=0||(v.y+v.height-b.y).toFixed(e.precision)<=0),j=!0===x&&!1===w&&b.y>u.y,$=!0===w&&!1===x&&b.x<u.x,O=!0===x&&!1===w&&b.y<u.y,E=!0===w&&!1===x&&b.x>u.x;!1===x&&!1===w&&(m.top>0&&(m.top<=m.right||m.top<=m.left)?j=!0:m.right>0&&(m.right<=m.top||m.right<=m.bottom)?$=!0:m.bottom>0&&(m.bottom<=m.right||m.bottom<=m.left)?O=!0:m.left>0&&(m.left<=m.bottom||m.left<=m.top)&&(E=!0));var A={delta:m,from:{top:j,right:$,bottom:O,left:E}},S=t.$match,k=S.scope,I=S.name;s.push(e.snippets[k][I].bind(e,c,A,o))})}})}),s.forEach(function(t){t()})}},function(t,e,n){"use strict";function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function i(t){var e=this;Object.entries(t).forEach(function(t){var n=o(t,2),r=(n[0],n[1]),i=r.get("cameras"),s=r.get("images"),a=r.get("position");i.forEach(function(t){var n=e.$[t.$camera.name];Object.entries(s).forEach(function(i){var s=o(i,2),c=(s[0],s[1]);void 0===c.cache&&(c.cache=e.assets[c.type][c.scope][c.name]());var u,h=c.cache,f=h.destination,l=h.frames,m=h.opacity,d=h.$source,p=o(l[h.frame],4),y=p[0],g=p[1],b=p[2],v=p[3];try{u=e.assets[d.type][d.scope][d.name]()}catch(t){y%=8,g%=1,b=1,v=1,u=e.assets.images.common["placeholder-8x1"]()}n.add({source:u,frame:{x:b*y,y:v*g,width:b,height:v},destination:{x:a.x+f[0]-f[3]/2,y:a.y+f[1]-f[4]/2,z:a.z+f[2],width:f[3],height:f[4]},opacity:t.opacity*m*(r.has("opacity")?r.get("opacity").opacity:1)})})})})}n.r(e),n.d(e,"images",function(){return i})},function(t,e,n){"use strict";function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function i(t){var e=this;Object.entries(t).forEach(function(t){var n=o(t,2),r=(n[0],n[1]);e.$.controllers.inputs.forEach(function(t){r.get("inputs").forEach(function(e){if(!0===Array.isArray(e.actions)&&-1!==e.actions.indexOf(t.action)&&e.state===t.state){var n={$command:e.$command,parameters:[t]};!0===r.has("commands")?r.get("commands").push(n):r.add({name:"commands",parameters:[n]})}})})})}n.r(e),n.d(e,"inputs",function(){return i})},function(t,e,n){"use strict";function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function i(t){Object.entries(t).forEach(function(t){var e=o(t,2),n=(e[0],e[1]),r={};!0===n.has("position")&&(r.position=JSON.parse(JSON.stringify(n.get("position")))),!0===n.has("hitbox")&&(r.hitbox=JSON.parse(JSON.stringify(n.get("hitbox"))));var i={name:"previous",parameters:r};n.add(i)})}n.r(e),n.d(e,"previous",function(){return i})},function(t,e,n){"use strict";function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function i(t){var e=this;Object.entries(t).forEach(function(t){var n=o(t,2),r=(n[0],n[1].get("images"));Object.entries(r).forEach(function(t){var n=o(t,2),r=(n[0],n[1]);void 0===r.cache&&(r.cache=e.assets[r.type][r.scope][r.name]());var i=r.cache,s=i.framerate,a=i.frames;if(a.length>1){i.elapsed+=e.delta;for(var c=1e3/s;i.elapsed>=c;)i.elapsed-=c,i.frame=i.frame===a.length-1?0:i.frame+1}})})}n.r(e),n.d(e,"spritesheets",function(){return i})},function(t,e,n){"use strict";function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function i(t){var e=this;Object.entries(t).forEach(function(t){var n=o(t,2),r=(n[0],n[1]),i=r.get("state"),s=i.changes;if(s.length>0){var a=i.$handling,c=e.snippets[a.scope][a.name];i.changes=[],c(r,s)}})}n.r(e),n.d(e,"state",function(){return i})},function(t,e,n){"use strict";function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function i(t){var e=this;Object.entries(t).forEach(function(t){var n=o(t,2),r=(n[0],n[1]),i=r.get("cameras"),s=r.get("position"),a=r.get("text"),c=a.$font,u=a.anchor,h=a.destination,f=a.lines,l=a.opacity,m=o(h,5),d=(m[0],m[1],m[2],m[3],m[4],e.assets[c.type][c.scope][c.name]()),p=d.$source,y=d.map,g=d.size,b=e.assets[p.type][p.scope][p.name]();i.forEach(function(t){var n=e.$[t.$camera.name];f.forEach(function(e,o){var i=0,a=0;switch(u.horizontal){case"left":i=0;break;case"center":case"middle":i=-h[3]*e.length/2;break;case"right":i=-h[3]*e.length}switch(u.vertical){case"top":a=0;break;case"center":case"middle":a=-h[4]*f.length/2;break;case"bottom":a=-h[4]*f.length}Array.from(e).forEach(function(e,c){var u=-1,f=-1;y.forEach(function(t,n){-1===u&&(u=t.indexOf(e),f=n)}),-1!==u&&n.add({source:b,frame:{x:u*g[0],y:f*g[1],width:g[0],height:g[1]},destination:{x:s.x+h[0]+i+h[3]*c,y:s.y+h[1]+a+h[4]*o,z:s.z+h[2],width:h[3],height:h[4]},opacity:t.opacity*l*(r.has("opacity")?r.get("opacity").opacity:1)})})})})})}n.r(e),n.d(e,"text",function(){return i})},function(t,e,n){"use strict";function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function s(t){var e=this;Object.entries(t).forEach(function(t){var n=r(t,2),i=(n[0],n[1]),s=i.get("timeout");if(s.elapsed+=e.delta,s.elapsed>=s.duration){if("object"===o(s.$ending)&&null!==s.$ending){var a=s.$ending;(0,e.snippets[a.scope][a.name])(i,s.elapsed-s.duration)}i.remove("timeout")}})}n.r(e),n.d(e,"timeout",function(){return s})},function(t,e,n){"use strict";function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function i(t){Object.entries(t).forEach(function(t){var e=o(t,2),n=(e[0],e[1]),r=n.get("position"),i=n.get("velocity");r.x+=i.right-i.left,r.y+=i.bottom-i.top,i.top=0,i.right=0,i.bottom=0,i.left=0})}n.r(e),n.d(e,"velocity",function(){return i})},function(t,e,n){"use strict";function o(t){this.$.camera;this.context.save(),this.context.lineWidth=8,this.context.strokeStyle="rgba(217, 87, 99, 0.5)",this.context.strokeRect(this.$.camera.screen.x()+4,this.$.camera.screen.y()+4,this.$.camera.screen.width()-8,this.$.camera.screen.height()-8),this.context.restore()}n.r(e),n.d(e,"camera",function(){return o})},function(t,e,n){"use strict";n.r(e),n.d(e,"forces",function(){return s});var o=n(0);function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function s(t){var e=this;Object.entries(t).forEach(function(t){var n=r(t,2),i=(n[0],n[1]),s=i.get("cameras"),a=i.get("forces"),c=i.get("position");s.forEach(function(t){for(var n=e.$[t.$camera.name],i=1e3*e.loop.framerate/1e3,s=function(t){var s=1e3*t/i,u={x:0,y:0},h={x:0,y:0};Object.entries(a).forEach(function(t){var n=r(t,2),o=(n[0],n[1]);void 0===o.cache&&(o.cache=e.assets[o.type][o.scope][o.name]());var i=o.cache,a=!1===i.$ending,c=(i.elapsed+s)/i.duration,f=i.$easing,l=!1!==i.$easing?e.snippets[f.scope][f.name]():Ease.linear(1);void 0!==i.moved&&(u.x+=i.moved.x,u.y+=i.moved.y),c>=1&&!1===a&&(c=1),h.x+=i.x*l(c),h.y+=i.y*l(c)}),e.context.save();var f=2*n.screen.scale(),l=2*n.screen.scale(),m=new o.a(n.screen.x()+(c.x+h.x-u.x)*n.screen.scale()-(n.position.x()*n.screen.scale()-n.screen.width()/2+n.shaking.shift.x*n.screen.scale())-f/2,n.screen.y()+(c.y+h.y-u.y)*n.screen.scale()-(n.position.y()*n.screen.scale()-n.screen.height()/2+n.shaking.shift.y*n.screen.scale())-l/2);e.context.fillStyle="black",e.context.fillRect(m.x-1*n.screen.scale(),m.y,f+2*n.screen.scale(),l),e.context.fillRect(m.x,m.y-1*n.screen.scale(),f,l+2*n.screen.scale()),e.context.fillStyle=0===t?"rgba(106, 190, 48, 1)":t===i?"rgba(217, 87, 99, 1)":"rgba(251, 242, 54, 1)",e.context.fillRect(m.x,m.y,f,l),e.context.restore()},u=0;u<=i;u+=1)s(u)})})}},function(t,e,n){"use strict";n.r(e),n.d(e,"hitbox",function(){return s});var o=n(0);function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function s(t){var e=this;Object.entries(t).forEach(function(t){var n=r(t,2),i=(n[0],n[1]),s=i.get("cameras"),a=i.get("hitbox"),c=i.get("position");s.forEach(function(t){var n=e.$[t.$camera.name],r=new o.b(n.screen.x()+(c.x+a.x-a.width/2)*n.screen.scale()-(n.position.x()*n.screen.scale()-n.screen.width()/2+n.shaking.shift.x*n.screen.scale()),n.screen.y()+(c.y+a.y-a.height/2)*n.screen.scale()-(n.position.y()*n.screen.scale()-n.screen.height()/2+n.shaking.shift.y*n.screen.scale()),a.width*n.screen.scale(),a.height*n.screen.scale()),i=1*n.screen.scale(),s=i/2;e.context.save(),e.context.fillStyle="rgba(251, 242, 54, 0.2)",e.context.fillRect(r.x,r.y,r.width,r.height),e.context.lineWidth=i,e.context.strokeStyle="rgba(251, 242, 54, 1)",e.context.strokeRect(r.x+s,r.y+s,r.width-i,r.height-i),e.context.restore()})})}},function(t,e,n){"use strict";function o(t){var e=this;this.$.controllers.inputs.forEach(function(t){"KEYBOARD"===t.type&&"KEY_TAB"===t.action&&"DOWN"===t.state&&(e.$.debugging.active=!e.$.debugging.active),!0===e.$.debugging.active&&("KEYBOARD"===t.type&&"KEY_SHIFT"===t.action&&"DOWN"===t.state&&(console.clear(),e.restart()),"KEYBOARD"===t.type&&"KEY_SPACE"===t.action&&"DOWN"===t.state&&(!1===e.playing?e.play():!0===e.playing&&e.pause()),"KEYBOARD"===t.type&&"KEY_ENTER"===t.action&&"DOWN"===t.state&&!1===e.playing&&e.tick(),"MOUSE"===t.type&&"MOVE"===t.action&&(e.$.debugging.x=t.x,e.$.debugging.y=t.y),"KEYBOARD"===t.type&&"KEY_CTRL"===t.action&&"DOWN"===t.state&&(e.$.debugging.optional=!e.$.debugging.optional),void 0!==e.$.debugging.entity&&("KEYBOARD"===t.type&&"KEY_DELETE"===t.action&&"DOWN"===t.state&&e.$.world.remove(e.$.debugging.entity),"KEYBOARD"===t.type&&"KEY_O"===t.action&&"DOWN"===t.state&&(e.$.debugging.entity.get("position").x=0,e.$.debugging.entity.get("position").y=0),"KEYBOARD"===t.type&&"KEY_P"===t.action&&"DOWN"===t.state&&(e.$.debugging.entity.get("position").z+=1),"KEYBOARD"===t.type&&"KEY_M"===t.action&&"DOWN"===t.state&&(e.$.debugging.entity.get("position").z-=1),"KEYBOARD"===t.type&&"KEY_ESC"===t.action&&"DOWN"===t.state&&(e.$.debugging.drag=!1,delete e.$.debugging.entity)))})}n.r(e),n.d(e,"inputs",function(){return o})},function(t,e,n){"use strict";function o(t){if(!1===this.playing){var e=this.$.camera;this.context.save();this.context.lineWidth=8,this.context.fillStyle="black";var n=this.context.globalAlpha;this.context.globalAlpha=.8,this.context.fillRect(e.screen.x()+32-16,e.screen.y()+32-16,64,64),this.context.globalAlpha=n,this.context.strokeStyle="white",this.context.beginPath(),this.context.moveTo(e.screen.x()+4+32+4,e.screen.y()+32),this.context.lineTo(e.screen.x()+4+32+4,e.screen.y()+32+32),this.context.moveTo(e.screen.x()+4+32+4+16,e.screen.y()+32),this.context.lineTo(e.screen.x()+4+32+4+16,e.screen.y()+32+32),this.context.stroke(),this.context.restore()}}n.r(e),n.d(e,"pause",function(){return o})},function(t,e,n){"use strict";n.r(e),n.d(e,"spritesheet",function(){return a});var o=n(2),r=n(0);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function a(t){var e=this,n={y:Number.NEGATIVE_INFINITY,z:Number.NEGATIVE_INFINITY,camera:null,entity:null,spritesheet:null};if(Object.entries(t).forEach(function(t){var s=i(t,2),a=(s[0],s[1]),c=a.get("images");Object.entries(c).forEach(function(t){var s=i(t,2),c=s[0],u=s[1];void 0===u.cache&&(u.cache=e.assets[u.type][u.scope][u.name]());var h=u.cache,f=a.get("cameras"),l=a.get("position");f.forEach(function(t){var i=e.$[t.$camera.name],s={x:l.x+h.destination[0]-h.destination[3]/2,y:l.y+h.destination[1]-h.destination[4]/2,z:l.z+h.destination[2],width:h.destination[3],height:h.destination[4]},u=new r.a(e.$.debugging.x,e.$.debugging.y),f=new r.b(i.screen.x()+s.x*i.screen.scale()-(i.position.x()*i.screen.scale()-i.screen.width()/2+i.shaking.shift.x*i.screen.scale()),i.screen.y()+s.y*i.screen.scale()-(i.position.y()*i.screen.scale()-i.screen.height()/2+i.shaking.shift.y*i.screen.scale()),s.width*i.screen.scale(),s.height*i.screen.scale()),m=new r.b(i.screen.x(),i.screen.y(),i.screen.width(),i.screen.height());"number"==typeof e.$.debugging.x&&"number"==typeof e.$.debugging.y&&s.z>=n.z&&!0===Object(o.a)(u,f)&&!0===Object(o.a)(u,m)&&(n.y=f.y,n.z=s.z,n.camera=i,n.entity=a,n.spritesheet={name:c,x:f.x,y:f.y,z:s.z,width:f.width,height:f.height,reference:h}),e.$.controllers.inputs.forEach(function(t){if("MOUSE"===t.type&&"CLICK_LEFT"===t.action&&"DOWN"===t.state){var s=new r.a(t.x,t.y);if(!0===Object(o.a)(s,f)&&!0===Object(o.a)(s,m)&&(e.$.debugging.drag=i,a===n.entity)){var u=i.position.x()+i.shaking.shift.x+(s.x-i.screen.x()-i.screen.width()/2)/i.screen.scale(),h=i.position.y()+i.shaking.shift.y+(s.y-i.screen.y()-i.screen.height()/2)/i.screen.scale();e.$.debugging.entity=a,e.$.debugging.shift={x:Math.round(u)-a.get("position").x,y:Math.round(h)-a.get("position").y}}}if("MOUSE"===t.type&&"CLICK_LEFT"===t.action&&"UP"===t.state&&(e.$.debugging.drag=!1),"MOUSE"===t.type&&"CLICK_RIGHT"===t.action&&"DOWN"===t.state){var l=new r.a(t.x,t.y);!0===Object(o.a)(l,f)&&!0===Object(o.a)(l,m)&&(console.log("debugging :","entity","'"+a.name+"'","/","spritesheet","'"+c+"'","/","camera","'"+i.name+"'"),console.log(a))}"MOUSE"===t.type&&"MOVE"===t.action&&"LEAVE"===t.state&&(e.$.debugging.drag=!1)})})})}),Object.entries(t).forEach(function(t){var n=i(t,2),o=(n[0],n[1]),s=o.get("images");Object.entries(s).forEach(function(t){var n=i(t,2),s=(n[0],n[1]);s.cache||(s.cache=e.assets[s.type][s.scope][s.name]());o.get("cameras").forEach(function(t){var n=e.$[t.$camera.name];e.$.controllers.inputs.forEach(function(t){if("MOUSE"===t.type&&"MOVE"===t.action&&e.$.debugging.drag===n&&void 0!==e.$.debugging.entity){var o=new r.a(t.x,t.y),i=n.position.x()+n.shaking.shift.x+(o.x-n.screen.x()-n.screen.width()/2)/n.screen.scale(),s=n.position.y()+n.shaking.shift.y+(o.y-n.screen.y()-n.screen.height()/2)/n.screen.scale();e.$.debugging.entity.get("position").x=8*Math.round((Math.round(i)-e.$.debugging.shift.x)/8),e.$.debugging.entity.get("position").y=8*Math.round((Math.round(s)-e.$.debugging.shift.y)/8)}})})})}),null!==n.entity){var s=n.entity,a=n.spritesheet;s.get("cameras").forEach(function(t){var o=e.$[t.$camera.name],i=2*o.screen.scale(),c=2*i,u=new r.b(o.screen.x()+s.get("position").x*o.screen.scale()-(o.position.x()*o.screen.scale()-o.screen.width()/2+o.shaking.shift.x*o.screen.scale())-i/2,o.screen.y()+s.get("position").y*o.screen.scale()-(o.position.y()*o.screen.scale()-o.screen.height()/2+o.shaking.shift.y*o.screen.scale())-i/2,i,i);e.context.save(),e.context.fillStyle="black",e.context.fillRect(u.x-1*o.screen.scale(),u.y,u.width+2*o.screen.scale(),u.height),e.context.fillRect(u.x,u.y-1*o.screen.scale(),u.width,u.height+2*o.screen.scale()),e.context.fillStyle="rgba(217, 87, 99, 1)",e.context.fillRect(u.x,u.y,u.width,u.height),e.context.lineWidth=i,e.context.font="bold "+c+"px Courier New",e.context.textAlign="start",e.context.textBaseline="top",e.context.fillStyle="black";for(var h=["entity : '"+s.name+"'","spritesheet : '"+a.name+"'","","camera : '"+n.camera.name+"'","","x : "+s.get("position").x+" + "+a.reference.destination[0],"y : "+s.get("position").y+" + "+a.reference.destination[1],"z : "+s.get("position").z+" + "+a.reference.destination[2]],f=0,l=0,m=h.length;l<m;l+=1)f=Math.max(f,e.context.measureText(h[l]).width);var d=e.context.globalAlpha;e.context.globalAlpha=.8,e.context.fillRect(a.x+a.width,a.y-c,f+2*c,Math.max(a.height,8*c)+2*c),e.context.fillRect(a.x-c,a.y-c,a.width+c,c),e.context.fillRect(a.x-c,a.y,c,a.height),e.context.fillRect(a.x-c,a.y+a.height,a.width+c,Math.max(c,9*c-a.height)),e.context.globalAlpha=d,e.context.fillStyle="white";for(var p=0,y=h.length;p<y;p+=1)e.context.fillText(h[p],a.x+a.width+c,a.y+c*p);e.context.restore()})}}},function(t,e,n){"use strict";function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function i(t,e,n){var r={},i=null;function s(t,e){r[t]=e,n.push({type:"GAMEPAD",action:t,state:!0===e?"DOWN":"UP"})}function a(){i=window.requestAnimationFrame(function t(){var a=navigator.getGamepads()||[];if(void 0!==a[0]&&null!==a[0]&&!0===document.hasFocus()){var c=a[0];[[0,"A"],[1,"B"],[2,"X"],[3,"Y"],[4,"LB"],[5,"RB"],[6,"LT"],[7,"RT"],[8,"BACK"],[9,"START"],[10,"LSB"],[11,"RSB"],[12,"UP"],[13,"DOWN"],[14,"LEFT"],[15,"RIGHT"]].forEach(function(t){var n=o(t,2),i=n[0],a=n[1],u="GAMEPAD_"+a;-1!==e.indexOf(u)&&!0===c.buttons[i].pressed&&!1===r[u]?s(u,!0):-1!==e.indexOf(u)&&!1===c.buttons[i].pressed&&!0===r[u]&&s(u,!1)});[[0,["LS_LEFT","LS_RIGHT"]],[1,["LS_UP","LS_DOWN"]],[2,["RS_LEFT","RS_RIGHT"]],[3,["RS_UP","RS_DOWN"]]].forEach(function(t){var n=o(t,2),i=n[0],a=o(n[1],2),u=a[0],h=a[1];if(c.axes[i]<=-.5){var f="GAMEPAD_"+u;-1!==e.indexOf(f)&&!1===r[f]&&s(f,!0)}else if(c.axes[i]>-.5){var l="GAMEPAD_"+u;-1!==e.indexOf(l)&&!0===r[l]&&s(l,!1)}if(c.axes[i]>=.5){var m="GAMEPAD_"+h;-1!==e.indexOf(m)&&!1===r[m]&&s(m,!0)}else if(c.axes[i]<.5){var d="GAMEPAD_"+h;-1!==e.indexOf(d)&&!0===r[d]&&s(d,!1)}})}else!1!==document.hasFocus()&&0!==a.length||function(){for(var t in r)r.hasOwnProperty(t)&&!0===r[t]&&(r[t]=!1,n.push({type:"GAMEPAD",action:t,state:"UP"}))}();i=window.requestAnimationFrame(t.bind(this))}.bind(this))}e.forEach(function(t){r[t]=!1}),a.call(this),this.destroy=function(){window.cancelAnimationFrame(i)},this.setup=a}n.r(e);var s=[];function a(t,e){var n=[],o=[];(function(){n.push(new i(t,e,o)),n.push(new function(t,e,n){var o={};function r(){for(var t in o)o.hasOwnProperty(t)&&!0===o[t]&&(o[t]=!1,n.push({type:"KEYBOARD",action:t,state:"UP"}))}function i(t){var r="KEY_"+s[t.keyCode];-1!==e.indexOf(r)&&!1===o[r]&&(t.preventDefault(),o[r]=!0,n.push({type:"KEYBOARD",action:r,state:"DOWN"}))}function a(t){var r="KEY_"+s[t.keyCode];-1!==e.indexOf(r)&&!0===o[r]&&(t.preventDefault(),o[r]=!1,n.push({type:"KEYBOARD",action:r,state:"UP"}))}function c(){t.addEventListener("blur",r),t.addEventListener("keydown",i),t.addEventListener("keyup",a)}e.forEach(function(t){o[t]=!1}),c.call(this),this.destroy=function(){t.removeEventListener("blur",r),t.removeEventListener("keydown",i),t.removeEventListener("keyup",a)},this.setup=c}(t,e,o)),n.push(new function(t,e,n){function o(t){-1!==e.indexOf("CLICK_RIGHT")&&t.preventDefault()}function r(t){var o=t.button,r=["LEFT","MIDDLE","RIGHT"];if(void 0!==r[o]){var i="CLICK_"+r[o];if(-1!==e.indexOf(i)){t.preventDefault();var s=t.target.getBoundingClientRect(),a=t.clientX-s.left,c=t.clientY-s.top;n.push({type:"MOUSE",action:i,state:"DOWN",x:a,y:c})}}}function i(t){if(-1!==e.indexOf("MOVE")){t.preventDefault();var o=t.target.getBoundingClientRect(),r=t.clientX-o.left,i=t.clientY-o.top;n.push({type:"MOUSE",action:"MOVE",state:"ENTER",x:r,y:i})}}function s(t){if(-1!==e.indexOf("MOVE")){t.preventDefault();var o=t.target.getBoundingClientRect(),r=t.clientX-o.left,i=t.clientY-o.top;n.push({type:"MOUSE",action:"MOVE",state:"LEAVE",x:r,y:i})}}function a(t){if(-1!==e.indexOf("MOVE")){t.preventDefault();var o=t.target.getBoundingClientRect(),r=t.clientX-o.left,i=t.clientY-o.top;n.push({type:"MOUSE",action:"MOVE",x:r,y:i})}}function c(t){var o=t.button,r=["LEFT","MIDDLE","RIGHT"];if(void 0!==r[o]){var i="CLICK_"+r[o];if(-1!==e.indexOf(i)){t.preventDefault();var s=t.target.getBoundingClientRect(),a=t.clientX-s.left,c=t.clientY-s.top;n.push({type:"MOUSE",action:i,state:"UP",x:a,y:c})}}}function u(){t.addEventListener("contextmenu",o),t.addEventListener("mousedown",r),t.addEventListener("mouseenter",i),t.addEventListener("mouseleave",s),t.addEventListener("mousemove",a),t.addEventListener("mouseup",c),t.addEventListener("wheel",h)}function h(t){if(-1!==e.indexOf("SCROLL")){t.preventDefault();var o,r=t.target.getBoundingClientRect(),i=t.clientX-r.left,s=t.clientY-r.top;Math.abs(t.deltaY)>=Math.abs(t.deltaX)?(o="DOWN",t.deltaY<0&&(o="UP")):(o="RIGHT",t.deltaX<0&&(o="LEFT")),n.push({type:"MOUSE",action:"SCROLL",state:o,x:i,y:s})}}u.call(this),this.destroy=function(){t.removeEventListener("contextmenu",o),t.removeEventListener("mousedown",r),t.removeEventListener("mouseenter",i),t.removeEventListener("mouseleave",s),t.removeEventListener("mousemove",a),t.removeEventListener("mouseup",c),t.removeEventListener("wheel",h)},this.setup=u}(t,e,o))}).call(this),this.inputs=o,this.destroy=function(){n.forEach(function(t){t.destroy()})}}function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}s[9]="TAB",s[13]="ENTER",s[16]="SHIFT",s[17]="CTRL",s[18]="ALT",s[27]="ESC",s[32]="SPACE",s[46]="DELETE",s[37]="LEFT",s[38]="UP",s[39]="RIGHT",s[40]="DOWN",s[48]="ZERO",s[49]="ONE",s[50]="TWO",s[51]="THREE",s[52]="FOUR",s[53]="FIVE",s[54]="SIX",s[55]="SEVEN",s[56]="EIGHT",s[57]="NINE",s[65]="A",s[66]="B",s[67]="C",s[68]="D",s[69]="E",s[70]="F",s[71]="G",s[72]="H",s[73]="I",s[74]="J",s[75]="K",s[76]="L",s[77]="M",s[78]="N",s[79]="O",s[80]="P",s[81]="Q",s[82]="R",s[83]="S",s[84]="T",s[85]="U",s[86]="V",s[87]="W",s[88]="X",s[89]="Y",s[90]="Z";e.default=function(t){var e=[].concat(c(this.assets.datasets.debug.inputs()),c(this.assets.datasets[t].inputs()));return new a(this.element,e)}},function(t,e,n){"use strict";n.r(e);var o=n(1);function r(t,e,n){var r=[];this.name=e,this.position={x:function(){return 0},y:function(){return 0}},this.precision=3,this.screen={x:n.x,y:n.y,width:n.width,height:n.height,scale:n.scale,opacity:n.opacity},this.shaking={current:!1,duration:0,easing:null,elapsed:0,force:{x:0,y:0},shift:{x:0,y:0}},this.add=function(t){for(var e=0,n=r.length-1;n>=0;n-=1){var o=r[n];if(t.destination.z>=o.destination.z){e=n+1;break}}r.splice(e,0,t)},this.clean=function(){r=[]},this.idle=function(){this.shaking={current:!1,duration:0,easing:null,elapsed:0,force:{x:0,y:0},shift:{x:0,y:0}}},this.look=function(t,e){this.position.x=t,this.position.y=e},this.render=function(){var e=this;0!==this.screen.opacity&&r.forEach(function(n){var o=n.destination,r=n.frame,i=n.opacity,s=n.source;if(0!==i&&!1!==e.visible(o.x*e.screen.scale(),o.y*e.screen.scale(),o.width*e.screen.scale(),o.height*e.screen.scale())){var a=t.globalAlpha;t.globalAlpha=i*e.screen.opacity;for(var c=0;c<o.height/r.height;c+=1)for(var u=Math.min(1,o.height/r.height-c)*r.height,h=0;h<o.width/r.width;h+=1){var f=Math.min(1,o.width/r.width-h)*r.width;if(!1!==e.visible((o.x+h*r.width)*e.screen.scale(),(o.y+c*r.height)*e.screen.scale(),f*e.screen.scale(),u*e.screen.scale())){var l={destination:{x:e.screen.x()+(o.x+h*r.width)*e.screen.scale()-(e.position.x()*e.screen.scale()-e.screen.width()/2+e.shaking.shift.x*e.screen.scale()),y:e.screen.y()+(o.y+c*r.height)*e.screen.scale()-(e.position.y()*e.screen.scale()-e.screen.height()/2+e.shaking.shift.y*e.screen.scale()),width:f*e.screen.scale(),height:u*e.screen.scale()}},m={top:Math.min(0,l.destination.y-e.screen.y()),right:Math.max(0,l.destination.x+l.destination.width-(e.screen.x()+e.screen.width())),bottom:Math.max(0,l.destination.y+l.destination.height-(e.screen.y()+e.screen.height())),left:Math.min(0,l.destination.x-e.screen.x())},d={source:{x:r.x-m.left*(f/l.destination.width),y:r.y-m.top*(u/l.destination.height),width:f-m.right*(f/l.destination.width)-Math.abs(m.left*(f/l.destination.width)),height:u-m.bottom*(u/l.destination.height)-Math.abs(m.top*(u/l.destination.height))},destination:{x:l.destination.x-m.left,y:l.destination.y-m.top,width:l.destination.width-m.right-Math.abs(m.left),height:l.destination.height-m.bottom-Math.abs(m.top)}};t.drawImage(s,d.source.x,d.source.y,d.source.width,d.source.height,d.destination.x,d.destination.y,d.destination.width,d.destination.height)}}t.globalAlpha=a}})},this.shake=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.i(o.e(2));this.idle(),this.shaking.force={x:t,y:e},this.shaking.current=!0,this.shaking.duration=n,this.shaking.easing=r},this.update=function(t){if(!1!==this.shaking.current)if(this.shaking.elapsed+t>=this.shaking.duration)this.idle();else{this.shaking.elapsed+=t;var e=this.shaking.easing(this.shaking.elapsed/this.shaking.duration),n=2*Math.random()*Math.PI;this.shaking.shift.x=Math.round(Math.cos(n)*this.shaking.force.x*e),this.shaking.shift.y=Math.round(Math.sin(n)*this.shaking.force.y*e)}},this.visible=function(t,e,n,o){var r=this.position.x()*this.screen.scale()-this.screen.width()/2+this.shaking.shift.x*this.screen.scale(),i=this.position.y()*this.screen.scale()-this.screen.height()/2+this.shaking.shift.y*this.screen.scale(),s=this.screen.width(),a=this.screen.height();return!((t+n-r).toFixed(this.precision)<=0||0>=(r+s-t).toFixed(this.precision)||(e+o-i).toFixed(this.precision)<=0||0>=(i+a-e).toFixed(this.precision))}}e.default=function(t,e,n,o,i){var s=this,a=function(){return Math.min(s.size.width/n,s.size.height/o)};switch(e){case"contain-frameless":return new r(this.context,t,{x:function(){return 0},y:function(){return 0},width:function(){return s.size.width},height:function(){return s.size.height},scale:a,opacity:i});case"contain-framed":return new r(this.context,t,{x:function(){return(s.size.width-n*a())/2},y:function(){return(s.size.height-o*a())/2},width:function(){return n*a()},height:function(){return o*a()},scale:a,opacity:i});case"cover":return a=function(){return Math.max(s.size.width/n,s.size.height/o)},new r(this.context,t,{x:function(){return 0},y:function(){return 0},width:function(){return s.size.width},height:function(){return s.size.height},scale:a,opacity:i})}}},function(t,e,n){"use strict";function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function i(t,e){this.entities={},this.systems={},this.add=function(t){var e=this;!1===Array.isArray(t)&&(t=[t]),t.forEach(function(t){e.entities[t.name]=e.prepare(t)})},this.attach=function(t){var e=this;!1===Array.isArray(t)&&(t=[t]),t.forEach(function(t){e.entities[t.name]=t})},this.empty=function(){this.entities={}},this.get=function(t){return this.entities[t]},this.initialize=function(t){this.empty(),this.add(t)},this.prepare=function(t){return new function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;this.components={},this.name=t,this.add=function(t){var e=this;!1===Array.isArray(t)&&(t=[t]),t.forEach(function(t){var o=t.name,r=t.parameters,i=n();if(o in i){var s=i[o]();void 0!==r&&(s=r),e.components[o]=s}})},this.empty=function(){this.components={}},this.get=function(t){return this.components[t]},this.has=function(t){!1===Array.isArray(t)&&(t=[t]);for(var e=0,n=t.length;e<n;e+=1){var o=t[e],r=o.replace("not:",""),i=o!==r;if(this.components.hasOwnProperty(r)===i)return!1}return!0},this.initialize=function(t){this.empty(),this.add(t)},this.remove=function(t){!1===Array.isArray(t)&&(t=[t]);for(var e=0,n=t.length;e<n;e+=1){var o=t[e];!0===this.components.hasOwnProperty(o)&&delete this.components[o]}},this.add(e)}(t.name,t.components,e)},this.remove=function(t){!1===Array.isArray(t)&&(t=[t]);for(var e=0,n=t.length;e<n;e+=1){var o=t[e],r=o.name||o;!0===this.entities.hasOwnProperty(r)&&delete this.entities[r]}},this.system=function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.entities,s={};Object.entries(i).forEach(function(t){var e=o(t,2),r=e[0],i=e[1];!0===i.has(n)&&(s[r]=i)}),this.systems[e]={components:n,entities:s},r.call(t,s)}}n.r(e);e.default=function(){var t=this;return new i(this,function(){return t.components})}}]);
//# sourceMappingURL=index.js.map